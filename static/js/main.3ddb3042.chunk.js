(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],{50:function(t,e,n){},55:function(t,e,n){},57:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){},82:function(t,e,n){},83:function(t,e,n){},84:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(15),c=n.n(r),o=(n(50),n(7)),s=n(8),l=n(10),p=n(9),u=n(18),d=n(3),m=n(17),y=n(6),g=n(85),h=n(86),b=(n(55),n(1));function j(t){var e=100*t.currentTime/t.duration+"%";return Object(b.jsx)("div",{className:"component-mini-player fixed left-0 right-0 bottom-0 z-10",children:Object(b.jsxs)("div",{onClick:t.toggleUi,style:{background:"linear-gradient(to right, #D1FAE5 ".concat(e,", #fff ").concat(e,")")},className:"mini-player flex bg-white py-2 px-4 items-center border-t",children:[Object(b.jsx)("img",{src:t.song.cover,alt:"",className:"song-cover w-12 h-12 mr-3"}),Object(b.jsx)("div",{className:"text-base mr-auto",children:t.song.title}),Object(b.jsx)("div",{className:"action-btn",onClick:function(e){e.stopPropagation(),t.onPlayBtnTap()},children:t.playing?Object(b.jsx)("i",{className:"play-btn fa fa-pause-circle text-3xl"}):Object(b.jsx)("i",{className:"play-btn fa fa-play-circle text-3xl"})})]})})}var x=function(t){var e=Math.round(t),n=e%60,a=Math.floor(e/60);return"".concat(a>9?a:"0"+a,":").concat(n>9?n:"0"+n)},f=function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={seeking:!1,value:0},t.addRangeChangeEvent=function(e){e&&e.addEventListener("change",t.onChange)},t.onChange=function(e){var n,a;console.log(e.target.value),null===(n=(a=t.props).onSeek)||void 0===n||n.call(a,e.target.value),setTimeout((function(n){t.setState({seeking:!1,value:e.target.value})}),200)},t.onInput=function(e){t.setState({seeking:!0,value:e.target.value})},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this.props,e=t.max,n=t.value,a=this.state,i=a.seeking,r=a.value,c=n;return i&&(c=r),Object(b.jsxs)("div",{className:"component-progress-bar",children:[Object(b.jsx)("input",{type:"range",min:"0",max:e,ref:this.addRangeChangeEvent,onInput:this.onInput,value:c,className:"progress w-full"}),Object(b.jsxs)("div",{className:"progress-labels text-gray-600 text-xs flex justify-between mt-2",children:[Object(b.jsx)("div",{className:"progress-label",children:x(c)}),Object(b.jsx)("div",{className:"progress-label",children:x(e)})]})]})}}]),n}(i.a.Component),v=function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).el=document.createElement("div"),t.parentDom=void 0,t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.parent||"body";this.parentDom=document.querySelector(t)||document.body,this.parentDom.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){var t;null===(t=this.parentDom)||void 0===t||t.removeChild(this.el)}},{key:"render",value:function(){return c.a.createPortal(this.props.children,this.el)}}]),n}(i.a.Component);function O(t){var e=["component-mask","w-screen","h-screen","bg-black","bg-opacity-50","fixed","inset-0","z-20"];return t.visible||e.push("hidden"),Object(b.jsxs)(v,{children:[Object(b.jsx)("div",{className:e.join(" "),onClick:t.onTap}),t.children]})}n(57);var w,N,S=function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={playerListVisible:!1},t.openPlayList=function(){t.setState({playerListVisible:!0})},t.closePlayList=function(){t.setState({playerListVisible:!1})},t}return Object(s.a)(n,[{key:"render",value:function(){var t,e,n=this.props,a=n.song,i=n.currentTime,r=n.duration,c=a.title,o=a.artist,s=a.album,l=a.cover;return Object(b.jsxs)("section",{className:"component-music-player flex flex-col items-center box-border bg-gray-600 h-screen fixed inset-0",children:[Object(b.jsxs)("header",{className:"player-header flex-1 flex items-start justify-between text-white w-full h-4",children:[Object(b.jsx)("div",{className:"header-action w-8 text-center",onClick:this.props.toggleUi,children:Object(b.jsx)("i",{className:"fa fa-angle-down text-2xl"})}),Object(b.jsx)("div",{className:"header-action w-8 text-center",children:Object(b.jsx)("i",{className:"fa fa-share-alt text-2xl text-gray-400"})})]}),Object(b.jsx)("main",{className:"player-cover-wrapper",children:Object(b.jsx)("img",{src:l,alt:"",className:"player-cover rounded-lg"})}),Object(b.jsxs)("div",{className:"player-info w-full text-white mt-4",children:[Object(b.jsx)("div",{className:"title text-lg",children:c}),Object(b.jsx)("div",{className:"subtitle text-md text-gray-400 mb-1",children:o}),Object(b.jsx)("div",{className:"description text-sm text-gray-400",children:s})]}),Object(b.jsxs)("footer",{className:"player-footer flex flex-col w-full mt-4",children:[Object(b.jsx)(f,{value:i,max:r||a.duration,onSeek:this.props.onSeek}),this.props.generatePlayerActions(this)]}),Object(b.jsx)(O,{visible:this.state.playerListVisible,onTap:this.closePlayList,children:Object(b.jsx)(h.a,{in:this.state.playerListVisible,classNames:"slide-up",addEndListener:function(t,e){t.addEventListener("transitionend",e,!1)},unmountOnExit:!0,timeout:200,children:null===(t=(e=this.props).generatePlaylist)||void 0===t?void 0:t.call(e,{closePlayList:this.closePlayList})})})]})}}]),n}(i.a.Component),T=(n(58),function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return Object(b.jsx)("div",{className:"component-play-list w-screen fixed left-0 right-0 bottom-0 z-20",children:Object(b.jsx)("ul",{className:"play-list bg-gray-600 px-3 pb-8 absolute bottom-0 left-0 right-0",children:this.props.list.map((function(e,n){return Object(b.jsxs)("li",{className:"play-list-item flex text-gray-200 items-center py-2 ".concat(t.props.playingIndex===n?"playing":""),onClick:function(){var a,i;return null===(a=(i=t.props).onSelect)||void 0===a?void 0:a.call(i,n,e,t.props.list)},children:[Object(b.jsx)("div",{className:"item-title text-base text-white",children:e.title}),Object(b.jsxs)("div",{className:"item-artist text-xs",children:["\xa0-\xa0",e.artist]}),Object(b.jsx)("i",{className:"item-playing-icon fa fa-music fa-spin text-sm ml-2 hidden"}),Object(b.jsx)("i",{className:"item-remove-icon fa fa-times text-xl ml-auto",onClick:function(a){var i,r;a.stopPropagation(),null===(i=(r=t.props).onRemove)||void 0===i||i.call(r,n,e)}})]},n)}))})})}}]),n}(i.a.Component)),k=n(20);!function(t){t[t.list=0]="list",t[t.single=1]="single",t[t.random=2]="random"}(w||(w={})),function(t){t[t.setSong=0]="setSong",t[t.setPlaying=1]="setPlaying",t[t.setCurrentTime=2]="setCurrentTime",t[t.setDuration=3]="setDuration",t[t.setPlayingMode=4]="setPlayingMode",t[t.setDataSource=5]="setDataSource",t[t.setDataSourceUrl=6]="setDataSourceUrl"}(N||(N={}));n(59);var U=function(t){var e;return(e={},Object(k.a)(e,w.list,"fa-retweet"),Object(k.a)(e,w.random,"fa-random"),Object(k.a)(e,w.single,"fa-bolt"),e)[t]};function P(t){var e=t.playing?"fa-pause-circle":"fa-play-circle";return Object(b.jsxs)("div",{className:"component-player-actions flex justify-between items-center text-white mt-4",children:[Object(b.jsx)("div",{className:"action-btn",onClick:t.onModeBtnTap,children:Object(b.jsx)("i",{className:"fa ".concat(U(t.mode)," text-2xl text-gray-400"),"aria-hidden":"true"})}),Object(b.jsx)("div",{className:"action-btn",onClick:t.onPrevBtnTap,children:Object(b.jsx)("i",{className:"fa fa-step-backward text-3xl","aria-hidden":"true"})}),Object(b.jsx)("div",{className:"action-btn",onClick:t.onPlayBtnTap,children:Object(b.jsx)("i",{className:["fa","text-7xl",e].join(" "),"aria-hidden":"true"})}),Object(b.jsx)("div",{className:"action-btn",onClick:t.onNextBtnTap,children:Object(b.jsx)("i",{className:"fa fa-step-forward text-3xl","aria-hidden":"true"})}),Object(b.jsx)("div",{className:"action-btn",onClick:t.onPlaylistBtnTap,children:Object(b.jsx)("i",{className:"fa fa-list text-2xl text-gray-400","aria-hidden":"true"})})]})}var _=document.createElement("audio");_.preload="auto";var M=_,C=n(27),q=n.n(C),J=n(40),R=n(41),A=n.n(R),L=n(42),D=n.n(L),B={getDataSource:function(t){return A()({url:"https://script.google.com/macros/s/AKfycbwjpBpi125hrW5ihl9zwFqWVT_lBjbJ_-zMyRDN6jA89aphbvZkjw9fpg/exec?url=".concat(encodeURIComponent(t)),adapter:D.a}).then((function(t){return console.log(t),t.data}))}},I=function(t){return{type:N.setDataSource,payload:{dataSource:t}}},E=function(){return function(t,e){var n=e().playing.mode,a=[w.list,w.single,w.random],i=(a.indexOf(n)+1)%a.length;return t(function(t){return{type:N.setPlayingMode,payload:{mode:t}}}(a[i]))}},W=function(t){return{type:N.setPlaying,payload:{playing:t}}},G=function(t,e){return{type:N.setSong,payload:{index:t,list:e}}},V=function(t){return{type:N.setDuration,payload:{duration:t}}},z=function(t){return{type:N.setCurrentTime,payload:{currentTime:t}}},H=function(t){return localStorage.setItem("dataSourceUrl",t),{type:N.setDataSourceUrl,payload:{url:t}}},X=function(){return function(){var t=Object(J.a)(q.a.mark((function t(e,n){var a,i;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n().dataSource.url,t.next=3,B.getDataSource(a);case 3:return i=t.sent,localStorage.setItem(a,JSON.stringify(i)),t.abrupt("return",e(I(i)));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},F=(n(79),function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).calcNextIndex=function(){var e=t.props,n=e.index,a=e.playlist,i=e.mode;return i===w.single?n:i===w.random?Math.floor(Math.random()*a.length):(n+1)%a.length},t.playNext=function(){var e=t.calcNextIndex();t.playAtIndex(e)},t.calcPrevIndex=function(){var e=t.props,n=e.index,a=e.playlist;return(n-1+a.length)%a.length},t.playPrev=function(){var e=t.calcPrevIndex();t.playAtIndex(e)},t.playAtIndex=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.props.playlist;console.log(e,n),n[e]&&(M.src=n[e].playUrl,M.play(),t.props.setSong(e,n))},t.onModeBtnTap=function(){t.props.toggleMode()},t.onPlayBtnTap=function(){if(t.props.playing)return M.pause();M.play()},t.onSeek=function(t){M.currentTime=t},t.onPlaylistItemSelect=function(e,n,a){if(t.props.index===e)return M.play();e>a.length-1||t.playAtIndex(e,a)},t.onPlaylistItemRemove=function(e,n){var a=t.props,i=a.index,r=a.playlist.slice();r.splice(e,1);var c=i;e<i&&(c-=1),t.props.setSong(c,r)},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;M.addEventListener("playing",(function(){t.props.setPlaying(!0)})),M.addEventListener("pause",(function(){t.props.setPlaying(!1)})),M.addEventListener("timeupdate",(function(){t.props.setCurrentTime(M.currentTime)})),M.addEventListener("durationchange",(function(){t.props.setDuration(M.duration)})),M.addEventListener("ended",(function(){t.playNext()})),M.src=this.props.playingSong.playUrl}},{key:"render",value:function(){var t=this,e=this.props,n=e.index,a=e.playlist,i=e.playingSong,r=e.currentTime,c=e.duration,o=e.playing,s=e.mode,l=e.ui;return Object(b.jsx)("div",{className:"view-player relative z-10",children:Object(b.jsx)(g.a,{children:"mini"===l?Object(b.jsx)(h.a,{timeout:200,addEndListener:function(t,e){t.addEventListener("transitionend",e,!1)},classNames:"slide-down",children:Object(b.jsx)(j,{song:i,playing:o,currentTime:r,duration:c,onPlayBtnTap:this.onPlayBtnTap,toggleUi:this.props.toggleUi})},l):Object(b.jsx)(h.a,{timeout:200,addEndListener:function(t,e){t.addEventListener("transitionend",e,!1)},classNames:"slide-up",children:Object(b.jsx)(S,{song:i,playing:o,currentTime:r,duration:c,onPlayBtnTap:this.onPlayBtnTap,onPrevBtnTap:this.playPrev,onNextBtnTap:this.playNext,onSeek:this.onSeek,generatePlaylist:function(e){return Object(b.jsx)(T,{list:a,playingIndex:n,onRemove:t.onPlaylistItemRemove,onSelect:function(n,a,i){t.onPlaylistItemSelect(n,a,i),e.closePlayList()}})},generatePlayerActions:function(e){return Object(b.jsx)(P,{playing:o,mode:s,onModeBtnTap:t.onModeBtnTap,onPlayBtnTap:t.onPlayBtnTap,onPlaylistBtnTap:e.openPlayList,onNextBtnTap:t.playNext,onPrevBtnTap:t.playPrev})},toggleUi:this.props.toggleUi})},l)})})}}]),n}(i.a.Component)),Y=Object(m.b)((function(t){var e=t.playing,n=e.index,a=e.playlist;return Object(y.a)(Object(y.a)({},t.playing),{},{playingSong:a[n]})}),(function(t){return{toggleMode:function(){return t(E())},setPlaying:function(e){return t(W(e))},setDuration:function(e){return t(V(e))},setCurrentTime:function(e){return t(z(e))},setSong:function(e,n){return t(G(e,n))}}}))(F),K=(n(80),function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).importData=function(){var e=window.prompt("\u8bf7\u8f93\u5165\u6570\u636e\u6e90\u7684\u5730\u5740",t.props.dataSource.url);e&&t.props.setDataSourceUrl(e)},t}return Object(s.a)(n,[{key:"render",value:function(){var t=this.props.dataSource.dataSource;return Object(b.jsxs)("div",{className:"view-list",children:[Object(b.jsxs)("div",{className:"flex justify-between items-center mx-2 my-4",children:[Object(b.jsx)("h1",{className:"font-bold text-2xl",children:"\u64ad\u653e\u5217\u8868"}),Object(b.jsx)("div",{className:"import-data-action mr-4",onClick:this.importData,children:Object(b.jsx)("i",{className:"fa fa-database text-2xl"})})]}),Object(b.jsx)("ul",{className:"type-list",children:t.categoryList.map((function(t){return Object(b.jsx)(u.b,{to:"/type/".concat(t.id,"/songs"),children:Object(b.jsxs)("li",{className:"type-item flex items-center py-2 px-4 border-t active:bg-gray-100 transition-colors border-gray-100",children:[Object(b.jsx)("img",{src:t.cover,alt:"",className:"type-cover"}),Object(b.jsxs)("div",{className:"flex flex-col flex-1 ml-2",children:[Object(b.jsx)("h3",{className:"type-title text-lg",children:t.title}),Object(b.jsx)("p",{className:"type-subtitle text-gray-400 text-sm",children:t.subtitle})]}),Object(b.jsx)("i",{className:"fa fa-angle-right ml-auto text-3xl text-gray-300"})]})},t.id)}))})]})}}]),n}(i.a.Component)),Z=Object(m.b)((function(t){return{dataSource:t.dataSource}}),(function(t){return{setDataSourceUrl:function(e){return t(H(e)),t(X())}}}))(K),$=[{id:1,cover:"https://images.unsplash.com/photo-1612630374808-8934e1f362df?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=120&ixlib=rb-1.2.1&q=80&w=120",title:"\u6240\u6709\u6b4c\u66f2",subtitle:"\u6240\u6709\u7684\u6240\u6709",songs:[{id:1,title:"\u706f\u82b1\u4f50\u9152",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R800x800M0000002WzhX07r0ew.jpg?max_age=2592000",album:"\u706f\u82b1\u4f50\u9152",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u706f\u82b1\u4f50\u9152.mp3"},{id:2,title:"\u79bb\u4eba\u6101",artist:"\u674e\u8881\u6770",cover:"https://img3.doubanio.com/view/subject/m/public/s29748123.jpg",album:"\u79bb\u4eba\u6101",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u674e\u8881\u6770-\u79bb\u4eba\u6101.mp3"},{id:3,title:"\u7476\u5149",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u7476\u5149",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u7476\u5149.mp3"},{id:4,title:"\u82e5\u67d0\u65e5\u6211\u5c01\u7b14",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u82e5\u67d0\u65e5\u6211\u5c01\u7b14",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u82e5\u67d0\u65e5\u6211\u5c01\u7b14.mp3"},{id:5,title:"\u63ba\u9999",artist:"\u6cb3\u56fe",cover:"http://pic.xiami.net/images/album/img59/131659/97769071515131659.jpg",album:"\u63ba\u9999",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u63ba\u9999.mp3"},{id:6,title:"\u5929\u5149\u4e4b\u5916",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000001Bnq983feEWN.jpg?max_age=2592000",album:"\u5929\u5149\u4e4b\u5916",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5929\u5149\u4e4b\u5916.mp3"},{id:7,title:"\u4e91\u5f52\u5904",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R300x300M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u4e91\u5f52\u5904",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u4e91\u5f52\u5904.mp3"},{id:8,title:"\u5bfb\u5e38",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u5bfb\u5e38",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5bfb\u5e38.mp3"},{id:9,title:"\u5f71\u5b50",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000001j8ibN4VS0Ev.jpg?max_age=2592000",album:"\u5f71\u5b50",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5f71\u5b50.mp3"},{id:10,title:"\u5343\u79cb\u83ab\u8d1f",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000003O6GVe4Yxc6P.jpg?max_age=2592000",album:"\u503e\u8fdb\u5929\u4e0b",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5343\u79cb\u83ab\u8d1f.mp3"},{id:11,title:"\u4e0d\u67d3",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u4e0d\u67d3",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u4e0d\u67d3.mp3"},{id:12,title:"\u671d\u5fc6\u68a8\u82b1\u66ae\u5fc6\u96ea",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000000fIJUw3OqXno.jpg?max_age=2592000",album:"\u671d\u5fc6\u68a8\u82b1\u66ae\u5fc6\u96ea",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u671d\u5fc6\u68a8\u82b1\u66ae\u5fc6\u96ea.mp3"},{id:13,title:"\u957f\u591c\u68a6\u6211",artist:"\u6cb3\u56fe/\u6c50\u97f3\u793e",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M00000328zXE4VXheO.jpg?max_age=2592000",album:"\u957f\u591c\u68a6\u6211",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe,\u6c50\u97f3\u793e-\u957f\u591c\u68a6\u6211.mp3"}]},{id:2,cover:"https://images.unsplash.com/photo-1612253344366-7d3279d85b2f?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=120&ixlib=rb-1.2.1&q=80&w=120",title:"\u6211\u7684\u6700\u7231",subtitle:"\u6700\u7231\u7684\u6240\u6709",songs:[{id:1,title:"\u706f\u82b1\u4f50\u9152",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R800x800M0000002WzhX07r0ew.jpg?max_age=2592000",album:"\u706f\u82b1\u4f50\u9152",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u706f\u82b1\u4f50\u9152.mp3"},{id:2,title:"\u79bb\u4eba\u6101",artist:"\u674e\u8881\u6770",cover:"https://img3.doubanio.com/view/subject/m/public/s29748123.jpg",album:"\u79bb\u4eba\u6101",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u674e\u8881\u6770-\u79bb\u4eba\u6101.mp3"},{id:3,title:"\u7476\u5149",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u7476\u5149",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u7476\u5149.mp3"},{id:4,title:"\u82e5\u67d0\u65e5\u6211\u5c01\u7b14",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u82e5\u67d0\u65e5\u6211\u5c01\u7b14",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u82e5\u67d0\u65e5\u6211\u5c01\u7b14.mp3"},{id:5,title:"\u63ba\u9999",artist:"\u6cb3\u56fe",cover:"http://pic.xiami.net/images/album/img59/131659/97769071515131659.jpg",album:"\u63ba\u9999",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u63ba\u9999.mp3"},{id:6,title:"\u5929\u5149\u4e4b\u5916",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000001Bnq983feEWN.jpg?max_age=2592000",album:"\u5929\u5149\u4e4b\u5916",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5929\u5149\u4e4b\u5916.mp3"},{id:7,title:"\u4e91\u5f52\u5904",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R300x300M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u4e91\u5f52\u5904",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u4e91\u5f52\u5904.mp3"},{id:8,title:"\u5bfb\u5e38",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u5bfb\u5e38",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5bfb\u5e38.mp3"},{id:9,title:"\u5f71\u5b50",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000001j8ibN4VS0Ev.jpg?max_age=2592000",album:"\u5f71\u5b50",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5f71\u5b50.mp3"},{id:10,title:"\u5343\u79cb\u83ab\u8d1f",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000003O6GVe4Yxc6P.jpg?max_age=2592000",album:"\u503e\u8fdb\u5929\u4e0b",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u5343\u79cb\u83ab\u8d1f.mp3"},{id:11,title:"\u4e0d\u67d3",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T001R800x800M000001AkuJH2G5OJJ.jpg?max_age=2592000",album:"\u4e0d\u67d3",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u4e0d\u67d3.mp3"},{id:12,title:"\u671d\u5fc6\u68a8\u82b1\u66ae\u5fc6\u96ea",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M000000fIJUw3OqXno.jpg?max_age=2592000",album:"\u671d\u5fc6\u68a8\u82b1\u66ae\u5fc6\u96ea",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u671d\u5fc6\u68a8\u82b1\u66ae\u5fc6\u96ea.mp3"},{id:13,title:"\u957f\u591c\u68a6\u6211",artist:"\u6cb3\u56fe/\u6c50\u97f3\u793e",cover:"https://y.gtimg.cn/music/photo_new/T002R300x300M00000328zXE4VXheO.jpg?max_age=2592000",album:"\u957f\u591c\u68a6\u6211",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe,\u6c50\u97f3\u793e-\u957f\u591c\u68a6\u6211.mp3"}]}],Q=i.a.createContext($),tt=(n(82),function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).onSongItemTap=function(e,n){t.props.setSong(e,t.props.info.songs||[])},t}return Object(s.a)(n,[{key:"render",value:function(){var t,e=this,n=this.props,a=n.info,i=n.playingSong;return Object(b.jsxs)("section",{className:"view-song-list",children:[Object(b.jsxs)("header",{className:"flex px-6 pt-3 flex-col bg-gray-600 text-white",children:[Object(b.jsx)("nav",{className:"navigation-bar",children:Object(b.jsx)(u.b,{to:"/",className:"nav-action active:bg-gray-400",children:Object(b.jsx)("i",{className:"fa fa-arrow-left nav-back-icon text-xl"})})}),Object(b.jsxs)("div",{className:"song-list-info flex pb-6 pt-3 items-center",children:[Object(b.jsx)("img",{src:a.cover,className:"w-24",alt:""}),Object(b.jsx)("div",{className:"type-info ml-4",children:Object(b.jsx)("div",{className:"type-title text-2xl",children:a.title})})]})]}),Object(b.jsx)("main",{className:"border-t",children:Object(b.jsx)("ul",{className:"song-list",children:null===(t=a.songs)||void 0===t?void 0:t.map((function(t,n){return Object(b.jsxs)("li",{className:"song-item flex items-center py-2 px-4 border-b active:bg-gray-200 ".concat(i.id===t.id?"active":""),onClick:function(){return e.onSongItemTap(n,t)},children:[Object(b.jsx)("img",{src:t.cover,alt:"",className:"song-cover w-10"}),Object(b.jsxs)("div",{className:"song-info ml-2",children:[Object(b.jsx)("div",{className:"song-title text-base",children:t.title}),Object(b.jsx)("div",{className:"song-artist text-xs text-gray-400",children:t.artist})]}),Object(b.jsx)("div",{className:"playing-icon w-16 hidden",children:Object(b.jsx)("i",{className:"fa fa-music text-base ml-2 fa-spin"})})]},t.id)}))})})]})}}]),n}(i.a.Component)),et=Object(m.b)((function(t){var e=t.playing;return{playingSong:e.playlist[e.index]}}),(function(t){return{setSong:function(e,n){M.src=n[e].playUrl,M.play(),t(G(e,n))}}}))(tt);function nt(t){var e=t.match.params.tid;return Object(b.jsx)(Q.Consumer,{children:function(t){var n=t.find((function(t){return t.id+""===e}))||t[0];return Object(b.jsx)(et,{info:n})}})}var at=n(19),it=n(43),rt={mode:w.list,index:0,currentTime:0,duration:1,playing:!1,playlist:[{id:1,title:"\u706f\u82b1\u4f50\u9152",artist:"\u6cb3\u56fe",cover:"https://y.gtimg.cn/music/photo_new/T002R800x800M0000002WzhX07r0ew.jpg?max_age=2592000",album:"\u706f\u82b1\u4f50\u9152",lyrics:"",duration:0,playUrl:"http://cdn.qwertyyb.cn/audio/\u6cb3\u56fe-\u706f\u82b1\u4f50\u9152.mp3"}]},ct=function(){var t=localStorage.getItem("dataSourceUrl"),e=null;if(t)try{e=JSON.parse(localStorage.getItem(t)||"")}catch(n){console.log("local dataSource error",n)}return{url:t,dataSource:e}}();console.log(ct);var ot={url:ct.url||"https://gist.githubusercontent.com/qwertyyb/d39c09d3e618b013ddf66515ba2658ec/raw/datasource.json",dataSource:ct.dataSource||{version:1,categoryList:[]}},st=Object(at.c)({playing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case N.setSong:return Object(y.a)(Object(y.a)({},t),{},{index:e.payload.index,playlist:e.payload.list});case N.setCurrentTime:return Object(y.a)(Object(y.a)({},t),{},{currentTime:e.payload.currentTime});case N.setDuration:return Object(y.a)(Object(y.a)({},t),{},{duration:e.payload.duration});case N.setPlaying:return Object(y.a)(Object(y.a)({},t),{},{playing:e.payload.playing});case N.setPlayingMode:return Object(y.a)(Object(y.a)({},t),{},{mode:e.payload.mode})}return t},dataSource:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,e=arguments.length>1?arguments[1]:void 0;return e.type===N.setDataSource?Object(y.a)(Object(y.a)({},t),{},{dataSource:e.payload.dataSource}):e.type===N.setDataSourceUrl?Object(y.a)(Object(y.a)({},t),{},{url:e.payload.url}):t}}),lt=Object(at.d)(st,Object(at.a)(it.a));lt.dispatch(X());var pt=lt,ut=(n(83),function(t){Object(l.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={dataSource:$,playerUi:"mini"},t.toggleUi=function(){var e="mini"===t.state.playerUi?"normal":"mini";t.setState({playerUi:e})},t}return Object(s.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(m.a,{store:pt,children:[Object(b.jsx)("div",{className:"app-container",children:Object(b.jsx)(Q.Provider,{value:this.state.dataSource,children:Object(b.jsxs)(u.a,{children:[Object(b.jsx)(d.a,{path:"/",exact:!0,component:Z}),Object(b.jsx)(d.a,{path:"/type/:tid/songs",component:nt}),Object(b.jsx)(d.a,{path:"/player/:sid?",component:Y})]})})}),Object(b.jsx)(Y,{ui:this.state.playerUi,toggleUi:this.toggleUi})]})})}}]),n}(i.a.Component)),dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function mt(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var yt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),r(t),c(t)}))};c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(ut,{})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/qwertyyb/music-player",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/qwertyyb/music-player","/service-worker.js");dt?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):mt(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):mt(e,t)}))}}(),yt()}},[[84,1,2]]]);
//# sourceMappingURL=main.3ddb3042.chunk.js.map